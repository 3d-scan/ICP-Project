D = load([DATA_PATH '2frames.mat']);

D1 = D.D1(1:25:end, 1:25:end, :);
X1 = D1(:,:,1);
Y1 = D1(:,:,2);
Z1 = D1(:,:,3);
D1 = [X1(:)'; Y1(:)'; Z1(:)'];

D1(:,D1(1,:)==0 & D1(2,:)==0 & D1(3,:)==0) = [];

D2 = D.D2(1:25:end, 1:25:end, :);
X2 = D2(:,:,1);
Y2 = D2(:,:,2);
Z2 = D2(:,:,3);
D2 = [X2(:)'; Y2(:)'; Z2(:)'];
D2(:,D2(1,:)==0 & D2(2,:)==0 & D2(3,:)==0) = [];

[D2_alligned mse] = icp(D2, D1, 0.5);